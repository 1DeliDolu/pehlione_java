<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign In | Pehlione Shop</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=Source+Sans+3:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/style.css" th:href="@{/style.css}" />
  </head>
  <body class="page-auth" data-page="login">
        <div th:replace="~{nav :: main('auth','login')}"></div>

    <main class="container auth-shell">
      <div class="row g-4 align-items-stretch w-100">
        <section class="col-lg-6">
          <div class="auth-card p-4 p-lg-5 h-100">
            <div class="mb-3">
              <span class="badge badge-soft rounded-pill px-3 py-2 mb-3"
                >Secure Access</span
              >
              <h1 class="h3 fw-bold mb-2">Sign in to your account</h1>
              <p class="muted mb-0">
                Manage profile, addresses, payment cards and orders from your
                dashboard.
              </p>
            </div>

            <div th:if="${param.error}" class="alert alert-danger small">
              Invalid email or password.
            </div>
            <div th:if="${param.logout}" class="alert alert-success small">
              You have been logged out.
            </div>
            <div th:if="${registerSuccess}" class="alert alert-success small" th:text="${registerSuccess}">
              Account created successfully. Please sign in.
            </div>

            <form th:action="@{/login}" method="post" class="mt-3">
              <input
                type="hidden"
                th:if="${_csrf != null}"
                th:name="${_csrf.parameterName}"
                th:value="${_csrf.token}"
              />

              <div class="mb-3">
                <label class="form-label" for="email">Email</label>
                <input
                  id="email"
                  class="form-control"
                  name="email"
                  type="email"
                  placeholder="user@pehlione.com"
                  autocomplete="username"
                  required
                />
              </div>

              <div class="mb-3">
                <label class="form-label" for="password">Password</label>
                <input
                  id="password"
                  class="form-control"
                  name="password"
                  type="password"
                  placeholder="********"
                  autocomplete="current-password"
                  required
                />
              </div>

              <button class="btn btn-dark w-100" type="submit">
                <i class="bi bi-box-arrow-in-right me-1"></i>Sign In
              </button>
            </form>

            <div class="small muted mt-3">
              Demo users: <code>user@pehlione.com / password</code> and
              <code>admin@pehlione.com / admin123</code>
            </div>
          </div>
        </section>

        <aside class="col-lg-6">
          <div class="auth-aside p-4 p-lg-5 h-100">
            <h2 class="h4 fw-bold mb-2">Commerce Workspace</h2>
            <p class="muted mb-4">
              After sign in, profile dropdown includes Orders and role-based
              Dashboard sections for user/admin/worker views.
            </p>

            <div class="d-flex flex-column gap-2">
              <div class="auth-kpi d-flex justify-content-between">
                <span>Checkout Steps</span><span class="value">5</span>
              </div>
              <div class="auth-kpi d-flex justify-content-between">
                <span>Payment Methods</span><span class="value">3</span>
              </div>
              <div class="auth-kpi d-flex justify-content-between">
                <span>Address Format</span><span class="value">DE</span>
              </div>
            </div>

            <div class="small mt-4">
              Need a new account?
              <a class="auth-link" href="/register" th:href="@{/register}">
                Open registration page
              </a>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <div th:replace="~{footer :: main('compact')}"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
